<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>元素垂直居中</title>
    <script src="../../lib/jquery.js"></script>
    <style>
        .block {
            position: relative;
            top: 50%;
            width: 200px;
            height: 200px;
            margin: auto;
            background-color: chartreuse;
            transform: translateY(-50%);
        }

        html,
        body {
            width: 100%;
            height: 100%;
            margin: 0;
            padding: 0;
        }
    </style>
</head>

<body>
    <div class="block">

    </div>
    <script>
        (function () {
            function __canvasWM({
                // 使用 ES6 的函数默认值方式设置参数的默认取值
                // 具体参见 https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Functions/Default_parameters
                container = document.body,
                width = '200px',
                height = '200px',
                textAlign = 'center',
                textBaseline = 'middle',
                font = "20px microsoft yahei",
                fillStyle = 'rgba(184, 184, 184, 0.6)',
                content = '请勿外传',
                rotate = '30',
                zIndex = 1000
            } = {}) {
                var args = arguments[0];
                var canvas = document.createElement('canvas');

                canvas.setAttribute('width', width);
                canvas.setAttribute('height', height);
                var ctx = canvas.getContext("2d");

                ctx.textAlign = textAlign;
                ctx.textBaseline = textBaseline;
                ctx.font = font;
                ctx.fillStyle = fillStyle;
                ctx.rotate(Math.PI / 180 * rotate);
                ctx.fillText(content, parseFloat(width) / 2, parseFloat(height) / 2);

                var base64Url = canvas.toDataURL();
                const watermarkDiv = document.createElement("div");
                watermarkDiv.setAttribute('style', `
          position:absolute;
          top:0;
          left:0;
          width:100%;
          height:100%;
          z-index:${zIndex};
          pointer-events:none;
          background-repeat:repeat;
          background-image:url('${base64Url}')`);
                container.style.position = 'relative';
                container.insertBefore(watermarkDiv, container.firstChild);
            }
            window.__canvasWM = __canvasWM;
        })();

        // 调用
        __canvasWM({
            content: '严禁泄露'
        })
    </script>
</body>

</html>